<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Notes</title>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background-color: #000;
      color: #fff;
      font-family: 'Fira Code', monospace;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    #notepad-container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      width: 100%;
    }

    header {
      background-color: #111;
      padding: 1rem;
      font-size: 1rem;
      border-bottom: 1px solid #333;
    }

    .notepad {
      flex: 1;
      padding: 1.5rem;
      font-size: 0.95rem;
      line-height: 1.5;
      overflow-y: auto;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <div id="notepad-container">
    <header>
      ssh revardo@bastion-1.acad.opswerks.net | pw: Acad_student-revardo
    </header>

    <div class="notepad">


Cluster Maintenance

1. Draining and Cordoning the Worker Node (20 Points)
    • Task 1: Identify a node in your cluster to perform maintenance on.
    • Task 2: Cordon the node to mark it as unschedulable. Verify the node is marked as unschedulable.
    • Task 3: Drain the node to evict all pods from it. Verify no pods are running on the node except for daemonsets.
    • Task 4: Uncordon the node to mark it as schedulable again. Verify the node is back to schedulable status.

2. Upgrading Kubernetes Cluster Using Kubeadm (10 Points)
    • Task 1: On the control plane node, view the current version of Kubernetes.
    • Task 2: Upgrade kubeadm to the desired version: v1.30.2-**. Identify the versions first.
    • Task 3: Plan the upgrade.
    • Task 4: Apply the upgrade.
    • Task 5: Upgrade the kubelet and kubectl with the same version of kubeadm. Restart the kubelet afterwards.
    • Task 6: Verify control plane node is running the new version.

3. Managing Etcd Backups (15 Points)
    • Task 1: On the control plane node, identify the etcd pod.
    • Task 2: Create a snapshot of the etcd database and save it to /tmp/<filename>.
    • Task 3: Verify the snapshot file exists in /tmp/<filename>.
    • Task 4: Restore the etcd database from the snapshot to a new directory /var/lib/etcd-from-backup.
    • Task 5: Verify the snapshot file exists in the new directory.


Storage

1. Create a Persistent Volume (PV) (5 Points)
    • Task 1: Create a namespace called storage-opswerks.
    • Task 2: Create a Persistent Volume (PV) named pv-example with the following specifications:
        • Capacity: 1Gi
        • Access Modes: ReadWriteOnce
        • Storage Class: manual

2. Create a Persistent Volume Claim (PVC) (5 Points)
    • Task 1: Create a Persistent Volume Claim (PVC) named pvc-example in the storage-opswerks namespace to use the PV you created with the following specs:
        •Request: 1Gi
        •Access Modes: ReadWriteOnce
    • Task 2: Verify that the PVC pvc-example in the storage-opswerks namespace is bound to the PV pv-example.

3. Create a ConfigMap (5 Points)
Task: Create a ConfigMap named app-config in the storage-opswerks namespace with the following key-value pair:
key: config.json
value: {"key": "value"}

4. Create a Secret (5 Points)
    •Task: Create a Secret named db-secret in the storage-opswerks namespace with the following key-value pair:
        • key: password
        • value: pathways2024 (base64 encoded)

5. Mount the ConfigMap and Secret into a Pod (10 Points)
    • Task 1: Create a pod named configmap-secret-pod in the storage-opswerks namespace.
    • Task 2: Mount the ConfigMap app-config and Secret db-secret into the pod as volumes.


Networking

1. Create a Network Policy (7 Points)
    • Task 1: Create a namespace called networking-opswerks.
    • Task 2: Create a Network Policy named allow-frontend in the networking-opswerks namespace to allow incoming traffic to the frontend pod on port 80 from pods in the same namespace with the label role=backend.

2. Create a ClusterIP Service (5 Points)
    • Task: Create a ClusterIP Service named backend-service in the networking-opswerks namespace to expose the backend pods on port 8080.
    
3. Create an Ingress Resource (8 Points)
    • Task: Create an Ingress resource named frontend-ingress in the networking-opswerks namespace to expose the frontend pods on port 80 with the path /app.


Troubleshooting

1. Troubleshoot the node and pod (15 Points)
    • Scenario: You are a Kubernetes administrator responsible for maintaining the health and performance of your organization's Kubernetes cluster. You have been notified that one of the nodes is not functioning properly.
    • You also found that the pod fix-my-pod is not running as it is supposed to.
    • Tasks:
        • Ensure the node returns to a ready state.
        • Ensure the pod is running and working correctly on the node.
      
    </div>
  </div>
</body>
</html>
